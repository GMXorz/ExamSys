<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="description" content="" />
<meta name="author" content="" />
<!-- css -->
<link href="../css/bootstrap.min.css" rel="stylesheet" />
<link href="../css/fancybox/jquery.fancybox.css" rel="stylesheet">
<link href="../css/flexslider.css" rel="stylesheet" />
<link href="../css/style.css" rel="stylesheet" />
<link href="../css/gallery-1.css" rel="stylesheet">
<link href="../css/magnific-popup.css" rel="stylesheet">

</head>
<body style="margin: 0; padding: 0; overflow: auto; scroll: no;">
	<div id="wrapper" class="home-page">
		<div class="topbarpage"></div>
		<div class="headerpage"></div>

		<section id="inner-headline" style="margin-top: 90px;">
			<div class="container">
				<div class="row">
					<div class="col-lg-12">
						<h2 class="pageTitle">优秀作品筛选</h2>
					</div>
				</div>
			</div>
		</section>
		<section id="content">
			<div class="container"
				style="width: 90%; margin-top: 2em; background-color: #f6f6f6; border-radius: 10px; padding: 20px 20px;">

				<div class="row">
					<div id="isotope-gallery-container">
						<div id="picOne" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative">
							<div class="gallery-item">
								<div class="gallery-thumb">
									<div class="flexslider">
										<ul class="slides">
											<li>
												<img src="/img/works/9.jpg" alt="" />
											</li>
											<li>
												<img src="/img/works/10.jpg" alt="" />
											</li>
										</ul>
									</div>
								</div>
								<div class="gallery-details">
									<div class="editContent">
										<div class="checkboxFour">
											<input type="checkbox" value="" id="checkboxone" name="" />
											<label for="checkboxone"></label>
										</div>
										<h5 style="display: inline-block;">葛明曦</h5>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>

				<div class="pricing-action" style="background-color: inherit;">
					<button class="btn btn-primary" id="lastPagePic"
						style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">上一页</button>

					<button class="btn btn-primary" id="nextPagePic"
						style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">下一页</button>

				</div>

			</div>

		</section>
		<section>
			<div class="pricing-action" style="background-color: inherit;">
				<button class="btn btn-primary" id="choosePics"
					style="border-color: #002e5b; background-color: #002e5b; color: rgba(255, 255, 255, 0.84);">作品筛选完成</button>

			</div>
		</section>

		<div class="footerpage"></div>
	</div>
	<script src="../js/jquery.js"></script>
	<script src="../js/jquery.easing.1.3.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../js/jquery.fancybox.pack.js"></script>
	<script src="../js/jquery.fancybox-media.js"></script>
	<script src="../js/jquery.flexslider.js"></script>
	<script src="../js/animate.js"></script>

	<script src="../js/modernizr.custom.js"></script>
	<script src="../js/jquery.isotope.min.js"></script>
	<script src="../js/jquery.magnific-popup.min.js"></script>
	<script src="../js/animate.js"></script>
	<script src="../js/custom.js"></script>
	<script src="../js/jquery.cookie.js"></script>
	<script src="../js/all.js"></script>

	<script type="text/javascript">
		$(function() {
			var username = $.cookie('username');
			if (username != null && username != "null") {
				$(".topbarpage").load("/topbarLogin.html");
			} else {
				$(".topbarpage").load("/topbar.html");
			}
			window.onload = function() {
				getUserAuth(username);
			}
			
			var pageIndex = 0;
			var picsID = [];
			getPics(pageIndex,picsID);
			
			$(".headerpage").load("/header.html");
			$(".footerpage").load("/footer.html");
			
			$("#lastPagePic").live("click",function(){
				if(pageIndex>0){
					pageIndex--;
					getPics(pageIndex);
				}else{
					alert("已经是第一页了");
				}
			})
			
			$("#nextPagePic").live("click",function(){
				if(pageIndex<5){
					getChoosenPics(pageIndex,picsID);
					pageIndex++;
					getPics(pageIndex);
				}else{
					alert("已经是照片最后一页了");
				}
			})
			
			$("#choosePics").live("click",function(){
				getChoosenPics(pageIndex,picsID);
				$.ajax({　　
					type: "POST", // 用POST方式传输
					dataType: "JSON", // 数据格式:JSON
					contentType: "application/json",
		            url : "",
					error: function(data) {
						console.log("choosen pics finish error");　　
					},
					success: function(data) {
						alert("照片删选成功！");
					}
				});
			})
			
		});
		
		function getPics(pageIndex,picsID){
			picsID = [];
			$.ajax({　　
				type: "POST", // 用POST方式传输
				dataType: "JSON", // 数据格式:JSON
				contentType: "application/json",
	            url:"/teacher/getProductions?pageNumber="+pageIndex,
				error: function(data) {
					console.log(data);　　
				},
				success: function(data) {
					console.log(data);
					console.log(data[0].studentName);
					console.log(data[0].questionAnswerId);
					for(var i=0;i<data.length;i++){
						picsID.push(data[i].questionAnswerId);
						$("#isotope-gallery-container").append('<div id="pic'+i+'" class="col-md-4 col-sm-6 col-xs-12 gallery-item-wrapper artwork creative"><div class="gallery-item"><div class="gallery-thumb"><div class="flexslider"><ul class="slides"></ul></div></div></div></div>');
						for(var j=0;j<data[i].production.length;j++){
							$("#isotope-gallery-container").children(".creative:last-child").find(".slides").append('<li><img src="data:image/gif;base64,'+data[i].production[j]+'" alt="" /></li>');
						}
						$("#isotope-gallery-container").children(".creative:last-child").find(".gallery-item").append('<div class="gallery-details"><div class="editContent"><div class="checkboxFour"><input type="checkbox" value="'+i+'" id="checkbox'+i+'" name="" /><label for="checkbox'+i+'"></label></div><h5 style="display: inline-block;">'+data[i].studentName+'</h5></div></div>')
					
					}
				}
			});
		}
		
		function getChoosenPics(pageIndex,picsID){
			var choosenList = [];
			var choosenIndex = 0;
			$("input[type='checkbox']:checkbox:checked").each(function() {
				choosenIndex = $(this).val()
				console.log(choosenIndex);
				choosenList.push(picsID[choosenIndex]);
			});
			
			$.ajax({　　
				type: "POST", // 用POST方式传输
				dataType: "JSON", // 数据格式:JSON
				contentType: "application/json",
	            url : "",
				error: function(data) {
					console.log("choosen error");　　
				},
				success: function(data) {
					console.log("choosen success");
				}
			});
		}
		
	</script>

</body>
</html>